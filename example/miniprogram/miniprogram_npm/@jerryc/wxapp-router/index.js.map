{"version":3,"sources":["index.js","lib/router.js","lib/logger.js","lib/navigator.js","lib/utils.js","lib/route.js","lib/route-matcher.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AGTA,AFMA,AGTA;AJaA,AGTA,AFMA,AGTA;ADIA,AFMA,AGTA;ADIA,AENA,AJYA,AGTA;ADIA,AENA,AJYA,AGTA;ADIA,AENA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA,AGTA;ADIA,AGTA,ADGA,AJYA;AELA,AGTA,ADGA,AJYA;AELA,AGTA,ADGA,AJYA;AELA,AGTA,ALeA;AELA,AGTA,ALeA;AELA,AGTA,ALeA;AELA,AGTA,ALeA;AELA,AGTA,ALeA;AELA,AGTA,ALeA;AELA,AGTA,ALeA;AELA,AGTA,ALeA;AELA,AFMA;AELA,AFMA;AELA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./lib/router\"), exports);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsK0NBQTZCIn0=","\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Router = void 0;\nvar logger_1 = __importDefault(require(\"./logger\"));\nvar navigator_1 = __importDefault(require(\"./navigator\"));\nvar route_1 = __importDefault(require(\"./route\"));\nvar route_matcher_1 = __importDefault(require(\"./route-matcher\"));\nvar utils_1 = require(\"./utils\");\nvar Router = /** @class */ (function () {\n    function Router() {\n        this.routes = {};\n        this.routeMatchers = [];\n    }\n    Router.prototype.register = function (option) {\n        var tiers = option.route\n            .replace(/^\\//, '')\n            .replace(/$\\//, '')\n            .split('/')\n            .slice(0, -1)\n            .join('.');\n        utils_1.setter(this.routes, tiers, new route_1.default({ routeUrl: option.route }));\n        if (option.path)\n            this.routeMatchers.push(new route_matcher_1.default(option.path, option.route));\n    };\n    Router.prototype.batchRegister = function (options) {\n        var _this = this;\n        options.forEach(function (option) { return _this.register(option); });\n    };\n    Router.prototype.getRoutes = function () {\n        return this.routes;\n    };\n    Router.prototype.gotoPage = function (pathOrRoute, query) {\n        var matchResult = this.routeMatchers\n            .map(function (routeMatcher) { return routeMatcher.match(pathOrRoute); })\n            .filter(function (result) { return !!result; });\n        logger_1.default.debug('route match result:', { matchResult: matchResult, pathOrRoute: pathOrRoute });\n        // 优先使用第一个匹配\n        var route = matchResult[0];\n        if (matchResult[0])\n            return navigator_1.default.gotoPage(route.route, Object.assign({}, route.query, query));\n        // 否则，尝试直接跳转\n        return navigator_1.default.gotoPage(pathOrRoute, query);\n    };\n    return Router;\n}());\nexports.Router = Router;\nexports.default = Router;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2xpYi9yb3V0ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsb0RBQThCO0FBQzlCLDBEQUFvQztBQUNwQyxrREFBNEI7QUFDNUIsa0VBQTJDO0FBQzNDLGlDQUFpQztBQU9qQztJQUFBO1FBQ1UsV0FBTSxHQUE0QixFQUFFLENBQUM7UUFDckMsa0JBQWEsR0FBd0IsRUFBRSxDQUFDO0lBeUNsRCxDQUFDO0lBdkNRLHlCQUFRLEdBQWYsVUFBZ0IsTUFBc0I7UUFDcEMsSUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUs7YUFDdkIsT0FBTyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUM7YUFDbEIsT0FBTyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUM7YUFDbEIsS0FBSyxDQUFDLEdBQUcsQ0FBQzthQUNWLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7YUFDWixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFFYixjQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsSUFBSSxlQUFLLENBQUMsRUFBRSxRQUFRLEVBQUUsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNsRSxJQUFJLE1BQU0sQ0FBQyxJQUFJO1lBQ2IsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSx1QkFBWSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDekUsQ0FBQztJQUVNLDhCQUFhLEdBQXBCLFVBQXFCLE9BQU87UUFBNUIsaUJBRUM7UUFEQyxPQUFPLENBQUMsT0FBTyxDQUFDLFVBQUMsTUFBTSxJQUFLLE9BQUEsS0FBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBckIsQ0FBcUIsQ0FBQyxDQUFDO0lBQ3JELENBQUM7SUFFTSwwQkFBUyxHQUFoQjtRQUNFLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNyQixDQUFDO0lBRU0seUJBQVEsR0FBZixVQUFnQixXQUFXLEVBQUUsS0FBSztRQUNoQyxJQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsYUFBYTthQUNuQyxHQUFHLENBQUMsVUFBQyxZQUFZLElBQUssT0FBQSxZQUFZLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxFQUEvQixDQUErQixDQUFDO2FBQ3RELE1BQU0sQ0FBQyxVQUFDLE1BQU0sSUFBSyxPQUFBLENBQUMsQ0FBQyxNQUFNLEVBQVIsQ0FBUSxDQUFDLENBQUM7UUFFaEMsZ0JBQU0sQ0FBQyxLQUFLLENBQUMscUJBQXFCLEVBQUUsRUFBRSxXQUFXLGFBQUEsRUFBRSxXQUFXLGFBQUEsRUFBRSxDQUFDLENBQUM7UUFFbEUsWUFBWTtRQUNaLElBQU0sS0FBSyxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3QixJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUM7WUFDaEIsT0FBTyxtQkFBUyxDQUFDLFFBQVEsQ0FDdkIsS0FBSyxDQUFDLEtBQUssRUFDWCxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUN0QyxDQUFDO1FBRUosWUFBWTtRQUNaLE9BQU8sbUJBQVMsQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFDSCxhQUFDO0FBQUQsQ0FBQyxBQTNDRCxJQTJDQztBQTNDWSx3QkFBTTtBQTZDbkIsa0JBQWUsTUFBTSxDQUFDIn0=","\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mini_logger_1 = require(\"@jerryc/mini-logger\");\nvar logger = new mini_logger_1.Logger({ prefix: 'wxapp-router' });\nexports.default = logger;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9nZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2xpYi9sb2dnZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxtREFBNkM7QUFFN0MsSUFBTSxNQUFNLEdBQVEsSUFBSSxvQkFBTSxDQUFDLEVBQUUsTUFBTSxFQUFFLGNBQWMsRUFBRSxDQUFDLENBQUM7QUFFM0Qsa0JBQWUsTUFBTSxDQUFDIn0=","\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Navigator = exports.PathType = void 0;\nvar logger_1 = __importDefault(require(\"./logger\"));\nvar utils_1 = require(\"./utils\");\nvar paramsParsing = function (commonParams) {\n    var path = commonParams.path, query = commonParams.query;\n    var routerPath = typeof path === 'string' ? { path: path, type: PathType.NORMAL } : path;\n    var urlQuery = utils_1.obj2Params(query);\n    var urlQueryStr = urlQuery ? \"?\" + urlQuery : '';\n    var toUrl = \"\" + routerPath.path + urlQueryStr;\n    return {\n        routerPath: routerPath,\n        toUrl: toUrl,\n    };\n};\nvar PathType;\n(function (PathType) {\n    // 普通页面\n    PathType[\"NORMAL\"] = \"normal\";\n    // 微信小程序原生tabBar页面\n    PathType[\"TAB\"] = \"tab\";\n})(PathType = exports.PathType || (exports.PathType = {}));\nvar Navigator = /** @class */ (function () {\n    function Navigator() {\n        // 锁\n        this.isClick = true;\n        // 页面栈最大深度\n        this.maxDeep = 10;\n    }\n    // 智能跳转应用内某页面\n    Navigator.prototype.gotoPage = function () {\n        var arg = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            arg[_i] = arguments[_i];\n        }\n        var path = arg[0], query = arg[1];\n        logger_1.default.debug('call gotoPage', { path: path, query: query });\n        var routerPath = paramsParsing({ path: path, query: query }).routerPath;\n        if (!routerPath)\n            return logger_1.default.log('gotoPage:fail', \"\\u9875\\u9762\\u8DEF\\u5F84\\u4E0D\\u5B58\\u5728 \" + path);\n        // 页面为tab页面\n        if (routerPath.type === PathType.TAB) {\n            return this.switchTab.apply(this, arg);\n        }\n        // 页面栈已达上限\n        var pageStack = getCurrentPages();\n        var pageStackLength = pageStack.length;\n        var curDelta = this.findPageInHistory(routerPath.path);\n        if (pageStack.length >= this.maxDeep) {\n            // 当前页面：在页面栈中\n            if (curDelta > -1)\n                return this.navigateBack({ delta: pageStackLength - curDelta });\n            // 当前页面：不在页面栈中\n            return this.redirectTo.apply(this, arg);\n        }\n        return this.navigateTo.apply(this, arg);\n    };\n    Navigator.prototype.navigateTo = function (path, query) {\n        var _this = this;\n        if (!this.isClick)\n            return;\n        this.isClick = false;\n        var toUrl = paramsParsing({ path: path, query: query }).toUrl;\n        wx.navigateTo({\n            url: toUrl,\n            success: function () {\n                logger_1.default.log('navigateTo:success', 'navigateTo成功', { toUrl: toUrl });\n            },\n            fail: function () {\n                var arg = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    arg[_i] = arguments[_i];\n                }\n                logger_1.default.log('navigateTo:fail', 'navigateTo失败', arg);\n            },\n            complete: function () {\n                _this.isClick = true;\n            },\n        });\n    };\n    Navigator.prototype.switchTab = function (path, query) {\n        var _this = this;\n        if (!this.isClick)\n            return;\n        this.isClick = false;\n        var toUrl = paramsParsing({ path: path, query: query }).toUrl;\n        wx.switchTab({\n            url: toUrl,\n            success: function () {\n                logger_1.default.log('switchTab:success', 'switchTab成功', { toUrl: toUrl });\n            },\n            fail: function () {\n                var arg = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    arg[_i] = arguments[_i];\n                }\n                logger_1.default.log('switchTab:fail', 'switchTab失败', arg);\n            },\n            complete: function () {\n                _this.isClick = true;\n            },\n        });\n    };\n    Navigator.prototype.redirectTo = function (path, query) {\n        var _this = this;\n        if (!this.isClick)\n            return;\n        this.isClick = false;\n        var toUrl = paramsParsing({ path: path, query: query }).toUrl;\n        wx.redirectTo({\n            url: toUrl,\n            success: function () {\n                logger_1.default.log('redirectTo:success', 'redirectTo成功', { toUrl: toUrl });\n            },\n            fail: function () {\n                var arg = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    arg[_i] = arguments[_i];\n                }\n                logger_1.default.log('redirectTo:fail', 'redirectTo失败', arg);\n            },\n            complete: function () {\n                _this.isClick = true;\n            },\n        });\n    };\n    Navigator.prototype.navigateBack = function (query, option) {\n        var _this = this;\n        if (!this.isClick)\n            return;\n        this.isClick = false;\n        if (option === null || option === void 0 ? void 0 : option.setData) {\n            var pageStack = getCurrentPages();\n            var backPage = pageStack[pageStack.length - 1 - (query.delta || 1)];\n            backPage === null || backPage === void 0 ? void 0 : backPage.setData(option === null || option === void 0 ? void 0 : option.setData);\n        }\n        wx.navigateBack({\n            delta: query.delta,\n            success: function () {\n                var _a;\n                var arg = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    arg[_i] = arguments[_i];\n                }\n                return (_a = query === null || query === void 0 ? void 0 : query.success) === null || _a === void 0 ? void 0 : _a.call.apply(_a, __spreadArray([query], arg));\n            },\n            fail: function () {\n                var _a;\n                var arg = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    arg[_i] = arguments[_i];\n                }\n                logger_1.default.log('navigateBack:fail', 'navigateBack失败', arg);\n                (_a = query === null || query === void 0 ? void 0 : query.fail) === null || _a === void 0 ? void 0 : _a.call.apply(_a, __spreadArray([query], arg));\n            },\n            complete: function () {\n                var _a;\n                var arg = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    arg[_i] = arguments[_i];\n                }\n                _this.isClick = true;\n                (_a = query === null || query === void 0 ? void 0 : query.complete) === null || _a === void 0 ? void 0 : _a.call.apply(_a, __spreadArray([query], arg));\n            },\n        });\n    };\n    Navigator.prototype.findPageInHistory = function (path) {\n        var pageStack = getCurrentPages();\n        var reg = /^\\//;\n        var delta = -1;\n        // eslint-disable-next-line functional/no-loop-statement\n        for (var i = 0; i < pageStack.length; i++) {\n            var myRoute = pageStack[i].route;\n            if (myRoute &&\n                path &&\n                myRoute.replace(reg, '') === path.replace(reg, '')) {\n                delta = i + 1; // 目标页在栈中的位置\n                break;\n            }\n        }\n        return delta;\n    };\n    return Navigator;\n}());\nexports.Navigator = Navigator;\nvar navigator = new Navigator();\nexports.default = navigator;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmF2aWdhdG9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2xpYi9uYXZpZ2F0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxvREFBOEI7QUFDOUIsaUNBQXFDO0FBT3JDLElBQU0sYUFBYSxHQUFHLFVBQUMsWUFBMEI7SUFDdkMsSUFBQSxJQUFJLEdBQVksWUFBWSxLQUF4QixFQUFFLEtBQUssR0FBSyxZQUFZLE1BQWpCLENBQWtCO0lBQ3JDLElBQU0sVUFBVSxHQUNkLE9BQU8sSUFBSSxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLE1BQUEsRUFBRSxJQUFJLEVBQUUsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFFcEUsSUFBTSxRQUFRLEdBQUcsa0JBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNuQyxJQUFNLFdBQVcsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQUksUUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDbkQsSUFBTSxLQUFLLEdBQUcsS0FBRyxVQUFVLENBQUMsSUFBSSxHQUFHLFdBQWEsQ0FBQztJQUVqRCxPQUFPO1FBQ0wsVUFBVSxZQUFBO1FBQ1YsS0FBSyxPQUFBO0tBQ04sQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGLElBQVksUUFLWDtBQUxELFdBQVksUUFBUTtJQUNsQixPQUFPO0lBQ1AsNkJBQWlCLENBQUE7SUFDakIsa0JBQWtCO0lBQ2xCLHVCQUFXLENBQUE7QUFDYixDQUFDLEVBTFcsUUFBUSxHQUFSLGdCQUFRLEtBQVIsZ0JBQVEsUUFLbkI7QUFFRDtJQUFBO1FBQ0UsSUFBSTtRQUNJLFlBQU8sR0FBRyxJQUFJLENBQUM7UUFFdkIsVUFBVTtRQUNGLFlBQU8sR0FBRyxFQUFFLENBQUM7SUE0SXZCLENBQUM7SUExSUMsYUFBYTtJQUNOLDRCQUFRLEdBQWY7UUFBZ0IsYUFBcUQ7YUFBckQs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","\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.obj2Params = exports.setter = void 0;\nvar setter = function (obj, key, value) {\n    var keys = key.split('.');\n    var pres = keys.slice(0, -1);\n    var last = keys[keys.length - 1];\n    var deepObj = keys.length === 1\n        ? obj\n        : pres.reduce(function (curObj, curKey) {\n            if (!curObj[curKey])\n                curObj[curKey] = {};\n            return curObj[curKey];\n        }, obj);\n    deepObj[last] = value;\n    return obj;\n};\nexports.setter = setter;\nvar obj2Params = function (obj, encode) {\n    if (obj === void 0) { obj = {}; }\n    if (encode === void 0) { encode = false; }\n    var result = [];\n    Object.keys(obj).forEach(function (key) {\n        return result.push(key + \"=\" + (encode ? encodeURIComponent(obj[key]) : obj[key]));\n    });\n    return result.join('&');\n};\nexports.obj2Params = obj2Params;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvbGliL3V0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFPLElBQU0sTUFBTSxHQUFHLFVBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxLQUFLO0lBQ3BDLElBQU0sSUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDNUIsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMvQixJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNuQyxJQUFNLE9BQU8sR0FDWCxJQUFJLENBQUMsTUFBTSxLQUFLLENBQUM7UUFDZixDQUFDLENBQUMsR0FBRztRQUNMLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQUMsTUFBTSxFQUFFLE1BQU07WUFDekIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUN6QyxPQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN4QixDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDZCxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDO0lBQ3RCLE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQyxDQUFDO0FBYlcsUUFBQSxNQUFNLFVBYWpCO0FBRUssSUFBTSxVQUFVLEdBQUcsVUFBQyxHQUFRLEVBQUUsTUFBYztJQUF4QixvQkFBQSxFQUFBLFFBQVE7SUFBRSx1QkFBQSxFQUFBLGNBQWM7SUFDakQsSUFBTSxNQUFNLEdBQWEsRUFBRSxDQUFDO0lBQzVCLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQUMsR0FBRztRQUMzQixPQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUksR0FBRyxVQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBRSxDQUFDO0lBQXpFLENBQXlFLENBQzFFLENBQUM7SUFFRixPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDMUIsQ0FBQyxDQUFDO0FBUFcsUUFBQSxVQUFVLGNBT3JCIn0=","\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Route = void 0;\nvar navigator_1 = __importDefault(require(\"./navigator\"));\nvar Route = /** @class */ (function () {\n    function Route(_a) {\n        var routeUrl = _a.routeUrl;\n        this.routeUrl = routeUrl;\n    }\n    Route.prototype.go = function (query) {\n        return navigator_1.default.gotoPage(this.routeUrl, query);\n    };\n    Route.prototype.navigateTo = function (query) {\n        return navigator_1.default.navigateTo(this.routeUrl, query);\n    };\n    Route.prototype.redirectTo = function (query) {\n        return navigator_1.default.redirectTo(this.routeUrl, query);\n    };\n    Route.prototype.switchTab = function (query) {\n        return navigator_1.default.switchTab(this.routeUrl, query);\n    };\n    return Route;\n}());\nexports.Route = Route;\nexports.default = Route;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvbGliL3JvdXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLDBEQUFvQztBQUVwQztJQUdFLGVBQVksRUFBWTtZQUFWLFFBQVEsY0FBQTtRQUNwQixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztJQUMzQixDQUFDO0lBRU0sa0JBQUUsR0FBVCxVQUFVLEtBQUs7UUFDYixPQUFPLG1CQUFTLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUVNLDBCQUFVLEdBQWpCLFVBQWtCLEtBQUs7UUFDckIsT0FBTyxtQkFBUyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3BELENBQUM7SUFFTSwwQkFBVSxHQUFqQixVQUFrQixLQUFLO1FBQ3JCLE9BQU8sbUJBQVMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBRU0seUJBQVMsR0FBaEIsVUFBaUIsS0FBSztRQUNwQixPQUFPLG1CQUFTLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDbkQsQ0FBQztJQUNILFlBQUM7QUFBRCxDQUFDLEFBdEJELElBc0JDO0FBdEJZLHNCQUFLO0FBd0JsQixrQkFBZSxLQUFLLENBQUMifQ==","\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar path_to_regexp_1 = require(\"path-to-regexp\");\nvar RouteMatcher = /** @class */ (function () {\n    function RouteMatcher(path, route) {\n        this.keys = [];\n        // 匹配正则\n        this.regex = null;\n        // 真实路径\n        this.route = null;\n        this.regex = path_to_regexp_1.pathToRegexp(path, this.keys);\n        this.route = route;\n    }\n    RouteMatcher.prototype.match = function (path) {\n        var result = path.match(this.regex);\n        if (!result)\n            return undefined;\n        var route = this.route;\n        var query = {};\n        // 若存在路由参数，解释\n        if (this.keys[0]) {\n            this.keys.forEach(function (key, index) {\n                query[key.name] = result[index + 1];\n            });\n        }\n        return {\n            route: route,\n            query: query,\n        };\n    };\n    return RouteMatcher;\n}());\nexports.default = RouteMatcher;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGUtbWF0Y2hlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvcm91dGUtbWF0Y2hlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGlEQUE4QztBQUU5QztJQVNFLHNCQUFZLElBQUksRUFBRSxLQUFLO1FBUmYsU0FBSSxHQUFHLEVBQUUsQ0FBQztRQUVsQixPQUFPO1FBQ0EsVUFBSyxHQUFHLElBQUksQ0FBQztRQUVwQixPQUFPO1FBQ0EsVUFBSyxHQUFHLElBQUksQ0FBQztRQUdsQixJQUFJLENBQUMsS0FBSyxHQUFHLDZCQUFZLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQyxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztJQUNyQixDQUFDO0lBRUQsNEJBQUssR0FBTCxVQUFNLElBQVk7UUFDaEIsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdEMsSUFBSSxDQUFDLE1BQU07WUFBRSxPQUFPLFNBQVMsQ0FBQztRQUU5QixJQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3pCLElBQU0sS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUVqQixhQUFhO1FBQ2IsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQ2hCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQUMsR0FBRyxFQUFFLEtBQUs7Z0JBQzNCLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQztZQUN0QyxDQUFDLENBQUMsQ0FBQztTQUNKO1FBRUQsT0FBTztZQUNMLEtBQUssT0FBQTtZQUNMLEtBQUssT0FBQTtTQUNOLENBQUM7SUFDSixDQUFDO0lBQ0gsbUJBQUM7QUFBRCxDQUFDLEFBakNELElBaUNDIn0="]}